{"ast":null,"code":"import _defineProperty from\"/home/rokaia/Documents/Pacify-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/rokaia/Documents/Pacify-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/rokaia/Documents/Pacify-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/rokaia/Documents/Pacify-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/home/rokaia/Documents/Pacify-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/rokaia/Documents/Pacify-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'./Login.css';import{Link,Redirect}from'react-router-dom';var LoginForm=/*#__PURE__*/function(_Component){_inherits(LoginForm,_Component);var _super=_createSuper(LoginForm);function LoginForm(props){var _this;_classCallCheck(this,LoginForm);_this=_super.call(this,props);_this.onLoginChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));console.log(_this.state.data);};_this.validate=function(){var eError='';var pError='';if(!_this.state.email){eError='Please enter your username or email address.';}if(!_this.state.password){pError='Please enter your password.';}if(_this.state.password.length<8&&_this.state.password.length>=1){pError='The Password is too short.';}if(eError||pError){_this.setState({emailError:eError,passwordError:pError});return false;}return true;};_this.state={data:[],email:'',password:'',emailError:\"\",passwordError:\"\",checked:true,MockBack:false,LoggedIn:false};_this.SubmitForm=_this.SubmitForm.bind(_assertThisInitialized(_this));_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));return _this;}_createClass(LoginForm,[{key:\"SubmitForm\",value:function SubmitForm(event){var _this2=this;event.preventDefault();var isValid=this.validate();if(isValid){console.log(this.state);// clear form\nthis.setState({emailError:''});this.setState({passwordError:''});}else{console.log('Invalid Form');}var _this$state=this.state,email=_this$state.email,password=_this$state.password,MockBack=_this$state.MockBack,data=_this$state.data;// let found = data[0].email\nif(email=='found'&&password==\"admin\"&&MockBack){this.setState({LoggedIn:true});sessionStorage.setItem(\"token\",\"asdfjfskfbsfgyfewjsfdk\");}else if(!MockBack){var requestOptions={method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded','Accept':'application/json'},body:new URLSearchParams({'email':email,'password':password})};console.log(requestOptions.body);fetch('http://23.96.41.241/api/login',requestOptions).then(console.log(\"fetching successfuly\")).then(function(response){return response.json();console.log(response);}).then(function(token){sessionStorage.setItem('token','bearer '+token);_this2.setState({LoggedIn:true});});}var token=sessionStorage.getItem('token');console.log(token);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;if(this.state.MockBack){fetch('http://23.96.41.241/api/song/5e8c31dc3d162e0ea00780f3').then(function(response){return response.json();}).then(function(users){_this3.setState({data:users});});}}},{key:\"render\",value:function render(){var _React$createElement,_React$createElement2,_this4=this;var data=this.state.data;if(this.state.LoggedIn==true){// console.log(\"logged\")\nreturn/*#__PURE__*/React.createElement(Redirect,{to:\"/WebFrame/FirstWebHome\"});}return/*#__PURE__*/React.createElement(\"div\",{className:\"Login_container\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.SubmitForm,className:\"tl\"},/*#__PURE__*/React.createElement(\"div\",{class:\"row\"},/*#__PURE__*/React.createElement(\"input\",(_React$createElement={className:\"Login_inText\",type:\"text\",name:\"email\",placeholder:\"Email address or username\"},_defineProperty(_React$createElement,\"className\",\"form-control\"),_defineProperty(_React$createElement,\"value\",this.state.email),_defineProperty(_React$createElement,\"onChange\",this.onLoginChange),_React$createElement))),/*#__PURE__*/React.createElement(\"div\",{style:{fontSize:12,color:\"red\"}},this.state.emailError),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{class:\"row\"},/*#__PURE__*/React.createElement(\"input\",(_React$createElement2={className:\"Login_input\",type:\"password\",name:\"password\",placeholder:\"Password\"},_defineProperty(_React$createElement2,\"className\",\"form-control\"),_defineProperty(_React$createElement2,\"value\",this.state.password),_defineProperty(_React$createElement2,\"onChange\",this.onLoginChange),_React$createElement2))),/*#__PURE__*/React.createElement(\"div\",{style:{fontSize:12,color:\"red\"}},this.state.passwordError),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",_defineProperty({class:\"row\"},\"class\",\"form-check\"),/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",className:\"Login_input_check\",name:\"checked\",value:this.state.checked,onChange:function onChange(event){return _this4.onLoginChange(event);}}),/*#__PURE__*/React.createElement(\"label\",{className:\"Login_rememberme\"},\" Remember me \"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"Login_button Login_button_login\"},\"LOG IN\"))));}}]);return LoginForm;}(Component);export default LoginForm;","map":{"version":3,"sources":["/home/rokaia/Documents/Pacify-FrontEnd/src/Components/LoginForm.js"],"names":["React","Component","Link","Redirect","LoginForm","props","onLoginChange","event","setState","target","name","value","console","log","state","data","validate","eError","pError","email","password","length","emailError","passwordError","checked","MockBack","LoggedIn","SubmitForm","bind","componentDidMount","preventDefault","isValid","sessionStorage","setItem","requestOptions","method","headers","body","URLSearchParams","fetch","then","response","json","token","getItem","users","fontSize","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './Login.css';\r\nimport {Link , Redirect} from 'react-router-dom'\r\nclass LoginForm extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            data:[],\r\n            email:'',\r\n            password:'',\r\n            emailError: \"\",\r\n            passwordError: \"\",\r\n            checked:true,\r\n            MockBack: false,\r\n            LoggedIn: false\r\n        }\r\n        this.SubmitForm = this.SubmitForm.bind(this)\r\n        this.componentDidMount = this.componentDidMount.bind(this)\r\n    }\r\n    onLoginChange=(event)=>{\r\n        this.setState({[event.target.name]: event.target.value })\r\n        console.log(this.state.data)\r\n    }\r\n    validate = () => {\r\n        let eError='';\r\n        let pError='';\r\n        if (!this.state.email) {\r\n            eError='Please enter your username or email address.';\r\n        }\r\n        if (!this.state.password){\r\n            pError='Please enter your password.'; \r\n        }\r\n        if(this.state.password.length < 8 && this.state.password.length >= 1 ){\r\n            pError= 'The Password is too short.';\r\n        }\r\n        if(eError || pError){\r\n            this.setState({emailError: eError, passwordError:pError});\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    SubmitForm(event){\r\n        event.preventDefault()\r\n        const isValid = this.validate();\r\n        if (isValid) {\r\n        console.log(this.state);\r\n        // clear form\r\n        this.setState({emailError:''});\r\n        this.setState({passwordError:''});\r\n        }\r\n        else{\r\n            console.log('Invalid Form');\r\n        }\r\n        const {email , password, MockBack,data} = this.state\r\n        // let found = data[0].email\r\n        if (email == 'found' && password == \"admin\" && MockBack ){\r\n            this.setState({LoggedIn: true})\r\n            sessionStorage.setItem(\"token\",\"asdfjfskfbsfgyfewjsfdk\")\r\n        }\r\n        else if (!MockBack){\r\n            const requestOptions = {\r\n                method: 'POST',\r\n                headers: { \r\n                'Content-Type': 'application/x-www-form-urlencoded',  \r\n                'Accept': 'application/json'},\r\n                body: new URLSearchParams({\r\n                    'email':email,\r\n                    'password':password})\r\n            };\r\n            console.log(requestOptions.body)\r\n            fetch('http://23.96.41.241/api/login', requestOptions)\r\n            .then(console.log(\"fetching successfuly\"))\r\n            .then(response => {\r\n                return response.json()\r\n                console.log(response)\r\n            })\r\n            .then((token)=>{\r\n                sessionStorage.setItem('token','bearer '+token)\r\n                this.setState({LoggedIn:true})\r\n            })\r\n        }\r\n    let token = sessionStorage.getItem('token')\r\n    console.log(token)\r\n    }\r\n    componentDidMount(){\r\n        if(this.state.MockBack){\r\n        fetch('http://23.96.41.241/api/song/5e8c31dc3d162e0ea00780f3')   \r\n\r\n        .then(response=> {\r\n\r\n            return response.json();\r\n        })\r\n        .then(users => {\r\n\r\n            this.setState({  data: users })\r\n        })\r\n        }\r\n    \r\n    }\r\n    render(){\r\n        const {data}=this.state\r\n        if (this.state.LoggedIn == true){\r\n            // console.log(\"logged\")\r\n            return <Redirect to='/WebFrame/FirstWebHome'></Redirect>\r\n        }\r\n        return(\r\n            <div className=\"Login_container\">            \r\n                <form onSubmit={this.SubmitForm} className='tl'>\r\n                    <div class=\"row\">\r\n                        <input\r\n                            className='Login_inText'\r\n                            type=\"text\"\r\n                            name='email'\r\n                            placeholder='Email address or username'\r\n                            className=\"form-control\"\r\n                            value={this.state.email}\r\n                            onChange={this.onLoginChange}\r\n                        />\r\n                    </div>\r\n                    <div style={{ fontSize: 12, color: \"red\" }}>\r\n                        {this.state.emailError}\r\n                    </div>\r\n                    <br></br>\r\n                    <div class=\"row\">\r\n                        <input\r\n                            className=\"Login_input\"\r\n                            type=\"password\"\r\n                            name='password'\r\n                            placeholder='Password'\r\n                            className=\"form-control\"\r\n                            value={this.state.password}\r\n                            onChange={this.onLoginChange}\r\n                        />\r\n                    </div>\r\n                    <div style={{ fontSize: 12, color: \"red\" }}>\r\n                        {this.state.passwordError}\r\n                    </div>\r\n                    <br></br>\r\n                    <div class=\"row\" class=\"form-check\" >\r\n                        <input \r\n                            type=\"checkbox\" \r\n                            className=\"Login_input_check\" \r\n                            name='checked'\r\n                            value={this.state.checked}\r\n                            onChange={event=>this.onLoginChange(event)}\r\n                        />\r\n                        <label className='Login_rememberme' > Remember me </label>\r\n                        <button type='submit' className=\"Login_button Login_button_login\">LOG IN</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}