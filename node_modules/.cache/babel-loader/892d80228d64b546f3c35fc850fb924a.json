{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component, forwardRef } from 'react';\nimport { getPosX, throttle } from './utils';\n\nvar ProgressBar = function (_Component) {\n  _inheritsLoose(ProgressBar, _Component);\n\n  var _super = _createSuper(ProgressBar);\n\n  function ProgressBar() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"audio\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"timeOnMouseMove\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"hasAddedAudioEventListener\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"downloadProgressAnimationTimer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isDraggingProgress: false,\n      currentTimePos: '0%',\n      hasDownloadProgressAnimation: false,\n      downloadProgressArr: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getCurrentProgress\", function (event) {\n      var _this$props = _this.props,\n          audio = _this$props.audio,\n          progressBar = _this$props.progressBar;\n\n      if (!audio.src || !isFinite(audio.currentTime) || !progressBar.current) {\n        return {\n          currentTime: 0,\n          currentTimePos: '0%'\n        };\n      }\n\n      var progressBarRect = progressBar.current.getBoundingClientRect();\n      var maxRelativePos = progressBarRect.width;\n      var relativePos = getPosX(event) - progressBarRect.left;\n\n      if (relativePos < 0) {\n        relativePos = 0;\n      } else if (relativePos > maxRelativePos) {\n        relativePos = maxRelativePos;\n      }\n\n      var currentTime = _this.props.audio.duration * relativePos / maxRelativePos;\n      return {\n        currentTime: currentTime,\n        currentTimePos: (relativePos / maxRelativePos * 100).toFixed(2) + \"%\"\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseDownOrTouchStartProgressBar\", function (event) {\n      event.stopPropagation();\n\n      var _this$getCurrentProgr = _this.getCurrentProgress(event.nativeEvent),\n          currentTime = _this$getCurrentProgr.currentTime,\n          currentTimePos = _this$getCurrentProgr.currentTimePos;\n\n      if (isFinite(currentTime)) {\n        _this.timeOnMouseMove = currentTime;\n\n        _this.setState({\n          isDraggingProgress: true,\n          currentTimePos: currentTimePos\n        });\n\n        if (event.nativeEvent instanceof MouseEvent) {\n          window.addEventListener('mousemove', _this.handleWindowMouseOrTouchMove);\n          window.addEventListener('mouseup', _this.handleWindowMouseOrTouchUp);\n        } else {\n          window.addEventListener('touchmove', _this.handleWindowMouseOrTouchMove);\n          window.addEventListener('touchend', _this.handleWindowMouseOrTouchUp);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWindowMouseOrTouchMove\", function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var windowSelection = window.getSelection();\n\n      if (windowSelection && windowSelection.type === 'Range') {\n        windowSelection.empty();\n      }\n\n      var isDraggingProgress = _this.state.isDraggingProgress;\n\n      if (isDraggingProgress) {\n        var _this$getCurrentProgr2 = _this.getCurrentProgress(event),\n            currentTime = _this$getCurrentProgr2.currentTime,\n            currentTimePos = _this$getCurrentProgr2.currentTimePos;\n\n        _this.timeOnMouseMove = currentTime;\n\n        _this.setState({\n          currentTimePos: currentTimePos\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWindowMouseOrTouchUp\", function (event) {\n      event.stopPropagation();\n\n      _this.setState(function (prevState) {\n        if (prevState.isDraggingProgress && isFinite(_this.timeOnMouseMove)) {\n          _this.props.audio.currentTime = _this.timeOnMouseMove;\n        }\n\n        return {\n          isDraggingProgress: false\n        };\n      });\n\n      if (event instanceof MouseEvent) {\n        window.removeEventListener('mousemove', _this.handleWindowMouseOrTouchMove);\n        window.removeEventListener('mouseup', _this.handleWindowMouseOrTouchUp);\n      } else {\n        window.removeEventListener('touchmove', _this.handleWindowMouseOrTouchMove);\n        window.removeEventListener('touchend', _this.handleWindowMouseOrTouchUp);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAudioTimeUpdate\", throttle(function (e) {\n      var isDraggingProgress = _this.state.isDraggingProgress;\n      var audio = e.target;\n      if (isDraggingProgress) return;\n      var duration = audio.duration,\n          currentTime = audio.currentTime;\n\n      _this.setState({\n        currentTimePos: (currentTime / duration * 100 || 0).toFixed(2) + \"%\"\n      });\n    }, _this.props.progressUpdateInterval));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAudioDownloadProgressUpdate\", function (e) {\n      var audio = e.target;\n      var downloadProgressArr = [];\n\n      for (var i = 0; i < audio.buffered.length; i++) {\n        var bufferedStart = audio.buffered.start(i);\n        var bufferedEnd = audio.buffered.end(i);\n        downloadProgressArr.push({\n          left: (Math.round(100 / audio.duration * bufferedStart) || 0) + \"%\",\n          width: (Math.round(100 / audio.duration * (bufferedEnd - bufferedStart)) || 0) + \"%\"\n        });\n      }\n\n      clearTimeout(_this.downloadProgressAnimationTimer);\n\n      _this.setState({\n        downloadProgressArr: downloadProgressArr,\n        hasDownloadProgressAnimation: true\n      });\n\n      _this.downloadProgressAnimationTimer = setTimeout(function () {\n        _this.setState({\n          hasDownloadProgressAnimation: false\n        });\n      }, 200);\n    });\n\n    return _this;\n  }\n\n  var _proto = ProgressBar.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    var audio = this.props.audio;\n\n    if (audio && !this.hasAddedAudioEventListener) {\n      this.audio = audio;\n      this.hasAddedAudioEventListener = true;\n      audio.addEventListener('timeupdate', this.handleAudioTimeUpdate);\n      audio.addEventListener('progress', this.handleAudioDownloadProgressUpdate);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.audio && this.hasAddedAudioEventListener) {\n      this.audio.removeEventListener('timeupdate', this.handleAudioTimeUpdate);\n      this.audio.removeEventListener('progress', this.handleAudioDownloadProgressUpdate);\n    }\n\n    clearTimeout(this.downloadProgressAnimationTimer);\n  };\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        showDownloadProgress = _this$props2.showDownloadProgress,\n        showFilledProgress = _this$props2.showFilledProgress,\n        progressBar = _this$props2.progressBar;\n    var _this$state = this.state,\n        currentTimePos = _this$state.currentTimePos,\n        downloadProgressArr = _this$state.downloadProgressArr,\n        hasDownloadProgressAnimation = _this$state.hasDownloadProgressAnimation;\n    return React.createElement(\"div\", {\n      className: \"rhap_progress-container\",\n      ref: progressBar,\n      \"aria-label\": \"Audio Progress Control\",\n      role: \"progressbar\",\n      \"aria-valuemin\": 0,\n      \"aria-valuemax\": 100,\n      \"aria-valuenow\": Number(currentTimePos.split('%')[0]),\n      tabIndex: 0,\n      onMouseDown: this.handleMouseDownOrTouchStartProgressBar,\n      onTouchStart: this.handleMouseDownOrTouchStartProgressBar\n    }, React.createElement(\"div\", {\n      className: \"rhap_progress-bar \" + (showDownloadProgress ? 'rhap_progress-bar-show-download' : '')\n    }, React.createElement(\"div\", {\n      className: \"rhap_progress-indicator\",\n      style: {\n        left: currentTimePos\n      }\n    }), showFilledProgress && React.createElement(\"div\", {\n      className: \"rhap_progress-filled\",\n      style: {\n        width: currentTimePos\n      }\n    }), showDownloadProgress && downloadProgressArr.map(function (_ref, i) {\n      var left = _ref.left,\n          width = _ref.width;\n      return React.createElement(\"div\", {\n        key: i,\n        className: \"rhap_download-progress\",\n        style: {\n          left: left,\n          width: width,\n          transitionDuration: hasDownloadProgressAnimation ? '.2s' : '0s'\n        }\n      });\n    })));\n  };\n\n  return ProgressBar;\n}(Component);\n\nvar ProgressBarForwardRef = function ProgressBarForwardRef(props, ref) {\n  return React.createElement(ProgressBar, _extends({}, props, {\n    progressBar: ref\n  }));\n};\n\nexport default forwardRef(ProgressBarForwardRef);\nexport { ProgressBar, ProgressBarForwardRef };","map":{"version":3,"sources":["/home/rokaia/Documents/frontend/node_modules/react-h5-audio-player/es/ProgressBar.js"],"names":["_extends","_assertThisInitialized","_possibleConstructorReturn","_getPrototypeOf","_inheritsLoose","_defineProperty","_createSuper","Derived","Super","result","_isNativeReflectConstruct","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Date","prototype","toString","call","e","React","Component","forwardRef","getPosX","throttle","ProgressBar","_Component","_super","_this","_len","length","args","Array","_key","concat","isDraggingProgress","currentTimePos","hasDownloadProgressAnimation","downloadProgressArr","event","_this$props","props","audio","progressBar","src","isFinite","currentTime","current","progressBarRect","getBoundingClientRect","maxRelativePos","width","relativePos","left","duration","toFixed","stopPropagation","_this$getCurrentProgr","getCurrentProgress","nativeEvent","timeOnMouseMove","setState","MouseEvent","window","addEventListener","handleWindowMouseOrTouchMove","handleWindowMouseOrTouchUp","preventDefault","windowSelection","getSelection","type","empty","state","_this$getCurrentProgr2","prevState","removeEventListener","target","progressUpdateInterval","i","buffered","bufferedStart","start","bufferedEnd","end","push","Math","round","clearTimeout","downloadProgressAnimationTimer","setTimeout","_proto","componentDidUpdate","hasAddedAudioEventListener","handleAudioTimeUpdate","handleAudioDownloadProgressUpdate","componentWillUnmount","render","_this$props2","showDownloadProgress","showFilledProgress","_this$state","createElement","className","ref","role","Number","split","tabIndex","onMouseDown","handleMouseDownOrTouchStartProgressBar","onTouchStart","style","map","_ref","key","transitionDuration","ProgressBarForwardRef"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, forwardRef } from 'react';\nimport { getPosX, throttle } from './utils';\n\nvar ProgressBar = function (_Component) {\n  _inheritsLoose(ProgressBar, _Component);\n\n  var _super = _createSuper(ProgressBar);\n\n  function ProgressBar() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"audio\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"timeOnMouseMove\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"hasAddedAudioEventListener\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"downloadProgressAnimationTimer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isDraggingProgress: false,\n      currentTimePos: '0%',\n      hasDownloadProgressAnimation: false,\n      downloadProgressArr: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getCurrentProgress\", function (event) {\n      var _this$props = _this.props,\n          audio = _this$props.audio,\n          progressBar = _this$props.progressBar;\n\n      if (!audio.src || !isFinite(audio.currentTime) || !progressBar.current) {\n        return {\n          currentTime: 0,\n          currentTimePos: '0%'\n        };\n      }\n\n      var progressBarRect = progressBar.current.getBoundingClientRect();\n      var maxRelativePos = progressBarRect.width;\n      var relativePos = getPosX(event) - progressBarRect.left;\n\n      if (relativePos < 0) {\n        relativePos = 0;\n      } else if (relativePos > maxRelativePos) {\n        relativePos = maxRelativePos;\n      }\n\n      var currentTime = _this.props.audio.duration * relativePos / maxRelativePos;\n      return {\n        currentTime: currentTime,\n        currentTimePos: (relativePos / maxRelativePos * 100).toFixed(2) + \"%\"\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseDownOrTouchStartProgressBar\", function (event) {\n      event.stopPropagation();\n\n      var _this$getCurrentProgr = _this.getCurrentProgress(event.nativeEvent),\n          currentTime = _this$getCurrentProgr.currentTime,\n          currentTimePos = _this$getCurrentProgr.currentTimePos;\n\n      if (isFinite(currentTime)) {\n        _this.timeOnMouseMove = currentTime;\n\n        _this.setState({\n          isDraggingProgress: true,\n          currentTimePos: currentTimePos\n        });\n\n        if (event.nativeEvent instanceof MouseEvent) {\n          window.addEventListener('mousemove', _this.handleWindowMouseOrTouchMove);\n          window.addEventListener('mouseup', _this.handleWindowMouseOrTouchUp);\n        } else {\n          window.addEventListener('touchmove', _this.handleWindowMouseOrTouchMove);\n          window.addEventListener('touchend', _this.handleWindowMouseOrTouchUp);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWindowMouseOrTouchMove\", function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var windowSelection = window.getSelection();\n\n      if (windowSelection && windowSelection.type === 'Range') {\n        windowSelection.empty();\n      }\n\n      var isDraggingProgress = _this.state.isDraggingProgress;\n\n      if (isDraggingProgress) {\n        var _this$getCurrentProgr2 = _this.getCurrentProgress(event),\n            currentTime = _this$getCurrentProgr2.currentTime,\n            currentTimePos = _this$getCurrentProgr2.currentTimePos;\n\n        _this.timeOnMouseMove = currentTime;\n\n        _this.setState({\n          currentTimePos: currentTimePos\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWindowMouseOrTouchUp\", function (event) {\n      event.stopPropagation();\n\n      _this.setState(function (prevState) {\n        if (prevState.isDraggingProgress && isFinite(_this.timeOnMouseMove)) {\n          _this.props.audio.currentTime = _this.timeOnMouseMove;\n        }\n\n        return {\n          isDraggingProgress: false\n        };\n      });\n\n      if (event instanceof MouseEvent) {\n        window.removeEventListener('mousemove', _this.handleWindowMouseOrTouchMove);\n        window.removeEventListener('mouseup', _this.handleWindowMouseOrTouchUp);\n      } else {\n        window.removeEventListener('touchmove', _this.handleWindowMouseOrTouchMove);\n        window.removeEventListener('touchend', _this.handleWindowMouseOrTouchUp);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAudioTimeUpdate\", throttle(function (e) {\n      var isDraggingProgress = _this.state.isDraggingProgress;\n      var audio = e.target;\n      if (isDraggingProgress) return;\n      var duration = audio.duration,\n          currentTime = audio.currentTime;\n\n      _this.setState({\n        currentTimePos: (currentTime / duration * 100 || 0).toFixed(2) + \"%\"\n      });\n    }, _this.props.progressUpdateInterval));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAudioDownloadProgressUpdate\", function (e) {\n      var audio = e.target;\n      var downloadProgressArr = [];\n\n      for (var i = 0; i < audio.buffered.length; i++) {\n        var bufferedStart = audio.buffered.start(i);\n        var bufferedEnd = audio.buffered.end(i);\n        downloadProgressArr.push({\n          left: (Math.round(100 / audio.duration * bufferedStart) || 0) + \"%\",\n          width: (Math.round(100 / audio.duration * (bufferedEnd - bufferedStart)) || 0) + \"%\"\n        });\n      }\n\n      clearTimeout(_this.downloadProgressAnimationTimer);\n\n      _this.setState({\n        downloadProgressArr: downloadProgressArr,\n        hasDownloadProgressAnimation: true\n      });\n\n      _this.downloadProgressAnimationTimer = setTimeout(function () {\n        _this.setState({\n          hasDownloadProgressAnimation: false\n        });\n      }, 200);\n    });\n\n    return _this;\n  }\n\n  var _proto = ProgressBar.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    var audio = this.props.audio;\n\n    if (audio && !this.hasAddedAudioEventListener) {\n      this.audio = audio;\n      this.hasAddedAudioEventListener = true;\n      audio.addEventListener('timeupdate', this.handleAudioTimeUpdate);\n      audio.addEventListener('progress', this.handleAudioDownloadProgressUpdate);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.audio && this.hasAddedAudioEventListener) {\n      this.audio.removeEventListener('timeupdate', this.handleAudioTimeUpdate);\n      this.audio.removeEventListener('progress', this.handleAudioDownloadProgressUpdate);\n    }\n\n    clearTimeout(this.downloadProgressAnimationTimer);\n  };\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        showDownloadProgress = _this$props2.showDownloadProgress,\n        showFilledProgress = _this$props2.showFilledProgress,\n        progressBar = _this$props2.progressBar;\n    var _this$state = this.state,\n        currentTimePos = _this$state.currentTimePos,\n        downloadProgressArr = _this$state.downloadProgressArr,\n        hasDownloadProgressAnimation = _this$state.hasDownloadProgressAnimation;\n    return React.createElement(\"div\", {\n      className: \"rhap_progress-container\",\n      ref: progressBar,\n      \"aria-label\": \"Audio Progress Control\",\n      role: \"progressbar\",\n      \"aria-valuemin\": 0,\n      \"aria-valuemax\": 100,\n      \"aria-valuenow\": Number(currentTimePos.split('%')[0]),\n      tabIndex: 0,\n      onMouseDown: this.handleMouseDownOrTouchStartProgressBar,\n      onTouchStart: this.handleMouseDownOrTouchStartProgressBar\n    }, React.createElement(\"div\", {\n      className: \"rhap_progress-bar \" + (showDownloadProgress ? 'rhap_progress-bar-show-download' : '')\n    }, React.createElement(\"div\", {\n      className: \"rhap_progress-indicator\",\n      style: {\n        left: currentTimePos\n      }\n    }), showFilledProgress && React.createElement(\"div\", {\n      className: \"rhap_progress-filled\",\n      style: {\n        width: currentTimePos\n      }\n    }), showDownloadProgress && downloadProgressArr.map(function (_ref, i) {\n      var left = _ref.left,\n          width = _ref.width;\n      return React.createElement(\"div\", {\n        key: i,\n        className: \"rhap_download-progress\",\n        style: {\n          left: left,\n          width: width,\n          transitionDuration: hasDownloadProgressAnimation ? '.2s' : '0s'\n        }\n      });\n    })));\n  };\n\n  return ProgressBar;\n}(Component);\n\nvar ProgressBarForwardRef = function ProgressBarForwardRef(props, ref) {\n  return React.createElement(ProgressBar, _extends({}, props, {\n    progressBar: ref\n  }));\n};\n\nexport default forwardRef(ProgressBarForwardRef);\nexport { ProgressBar, ProgressBarForwardRef };"]},"metadata":{},"sourceType":"module"}